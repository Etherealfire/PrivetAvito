## Описание сервиса

Тестируется микросервис объявлений Avito. Сервис позволяет:
 * Создавать объявления
 * Получать статистику по объявлению
 * Получить объявление по идентификатору
 * Удалять объявление по идентификатору
 * Получить все объявления пользователя

Идентификаторы:

* `sellerID` - идентификатор продавца (задаётся при создании объявления);
* `id` - уникальный идентификатор объявления, возвращается сервисом при создании.

Базовый URL:

```
https://qa-internship.avito.com
```

---

## Позитивные тест-кейсы

---

### TC-01 Создание объявления с валидными данными

**Предусловия:** 
Убедиться, что {{baseUrl}} = https://qa-internship.avito.com.

**Шаги:**

1. Отправить POST-запрос на эндпоинт
   `/api/1/item`
2. В теле запроса передать валидные данные:

```json
{
  "sellerID": 25211,
  "name": "Arty",
  "price": 300,
  "statistics": {
    "likes": 1,
    "viewCount": 25,
    "contacts": 228
  }
}

```

**Ожидаемый результат:**

* HTTP статус 200 OK

* Тело ответа содержит JSON-объект

* В JSON присутствует поле "status"

* Значение "status" начинается с "Сохранили объявление - "



---



### TC-02 Получение объявления по идентификатору
**Предусловия:**
* Создано объявление через POST `/api/1/item`
* Получен валидный `id` объявления. (пример: f84f6c79-7b2a-XXXX-XXXX-334a0032b74d)

**Шаги:**

1. Отправить GET-запрос на эндпоинт
   `{{baseUrl}}/api/1/item/:id`,
   где `{id}` — идентификатор созданного объявления

**Ожидаемый результат:**

* HTTP статус 200 OK
* Тело ответа - массив объектов
* В каждом объекте присутствуют поля:

  * `createdAt`
  * `id`
  * `name`
  * `price`
  * `sellerId`
  * `statistics`
  * `contacts`
  * `likes`
  * `viewCount`
 
  
---


### TC-03 Получение статистики по существующему объявлению

**Предусловия:**

* Создано объявление через POST `/api/1/item`
* Получен валидный `id` объявления. (пример: f84f6c79-7b2a-XXXX-XXXX-334a0032b74d)

**Шаги:**

1. Отправить GET-запрос на эндпоинт
   `{{baseUrl}}/api/1/statistic/:id`,
   где `id` — идентификатор созданного объявления

**Ожидаемый результат:**

* HTTP статус 200 OK
* Тело ответа - массив объектов
* В каждом объекте присутствуют поля:

  * `contacts`
  * `likes`
  * `viewCount`


---


### TC-04 Получить все объявления пользователя

**Предусловия:**

* Создано объявление
* Получен валидный `sellerID` пользователя. (пример: 25211)

**Шаги:**

1. Отправить GET-запрос на эндпоинт
   `{{baseUrl}}/api/1/:sellerID/item`

**Ожидаемый результат:**

* HTTP статус 200 OK
* Тело ответа - массив объектов
* В каждом объекте присутствуют поля:

  * `createdAt`
  * `id`
  * `name`
  * `price`
  * `sellerId`
  * `statistics`
  * `contacts`
  * `likes`
  * `viewCount`

---

### TC-05 Удаление существующего объявления по идентификатору

**Предусловия:**

* Создано объявление
* Получен валидный `id` объявления. (пример: f84f6c79-7b2a-XXXX-XXXX-334a0032b74d)

**Шаги:**

1. Отправить DELETE-запрос на эндпоинт
   `/api/2/item/id`

**Ожидаемый результат:**

* HTTP статус **200 OK**
* Пустое сообщение

---

## Негативные тест-кейсы

---

### TC-06 Создание объявления без обязательного поля `sellerID`

**Предусловия:**

* Убедиться, что `{{baseUrl}} = https://qa-internship.avito.com`

**Шаги:**

1. Отправить POST-запрос на `{{baseUrl}}/api/1/item`
2. Передать тело запроса без поля `sellerID`

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* В ответе присутствует сообщение об ошибке:

```json
"status": "не передан объект - объявление"
```

---

### TC-07 Создание объявления с невалидным значением `price = 0`

**Предусловия:**

* Убедиться, что `{{baseUrl}} = https://qa-internship.avito.com`

**Шаги:**

1. Отправить POST-запрос на `{{baseUrl}}/api/1/item`
2. Передать тело запроса с `price = 0`

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение об ошибке:

```json
{
  "result": {
    "message": "поле price обязательно",
    "messages": {}
  },
  "status": "400"
}
```

---

### TC-08 Создание объявления без поля `price`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить POST-запрос на `/api/1/item`
2. Исключить поле `price` из тела запроса

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение:

```json
"message": "поле price обязательно"
```

---

### TC-09 Создание объявления с `price = null`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить POST-запрос на `/api/1/item`
2. Передать `"price": null`

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение:

```json
"message": "поле price обязательно"
```

---

### TC-10 Создание объявления с пустым значением `name`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить POST-запрос на `/api/1/item`
2. Передать `"name": " "` (строка из пробела)

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение:

```json
"status": "не передан объект - объявление"
```

---

### TC-11 Создание объявления с невалидным значением `name` (без кавычек)

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить POST-запрос на `/api/1/item`
2. Передать `name: Arty` без кавычек (невалидный JSON)

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение:

```json
"status": "не передан объект - объявление"
```

---

### TC-12 Получение объявления по идентификатору со значением `null`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить GET-запрос на `/api/1/item/null`

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение:

```json
"message": "ID айтема не UUID: null"
```

---

### TC-13 Получение объявления по несуществующему идентификатору

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить GET-запрос на
   `/api/1/item/f84f6c79-7b2a-4953-886c-334a0032b742`

**Ожидаемый результат:**

* HTTP статус **404 Not Found**
* Сообщение:

```json
"message": "item f84f6c79-7b2a-4953-886c-334a0032b742 not found"
```

---

### TC-14 Получение статистики по несуществующему идентификатору объявления

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить GET-запрос на
   `/api/1/statistic/a792f156-1ce1-48eb-b22e-500c986a88a2`

**Ожидаемый результат:**

* HTTP статус **404 Not Found**
* Сообщение:

```json
"message": "statistic a792f156-1ce1-48eb-b22e-500c986a88a2 not found"
```

---

### TC-15 Получение статистики с `id = null`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить GET-запрос на `/api/1/statistic/null`

**Ожидаемый результат:**

* HTTP статус **400 Bad Request**
* Сообщение:

```json
"message": "передан некорректный идентификатор объявления"
```

---

### TC-16 Получение объявлений пользователя с несуществующим `sellerID`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить GET-запрос на `/api/1/11420/item`

**Ожидаемый результат:**

* HTTP статус **200 OK**
* Тело ответа пустое


Поведение требует уточнения — возможно ожидаем 404. Но оставлю как негативный кейс.

---

### TC-17 Получение объявлений пользователя с отрицательным `sellerID`

**Предусловия:**

* `{{baseUrl}}` задан корректно

**Шаги:**

1. Отправить GET-запрос на `/api/1/-111121/item`

**Ожидаемый результат:**

* HTTP статус **200 OK**
* Тело ответа отсутствует


Отсутствует валидация `sellerID`. Оставлю как негативный кейс.

---

### TC-18 Повторное удаление одного и того же объявления

**Предусловия:**

* Создано объявление
* Объявление успешно удалено

**Шаги:**

1. Повторно отправить DELETE-запрос на `/api/2/item/{id}`

**Ожидаемый результат:**

* HTTP статус **404 Not Found**

**Фактический результат:**

```json
{
  "result": {
    "message": "",
    "messages": null
  },
  "status": "500"
}
```
